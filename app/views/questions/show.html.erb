<%= provide(:title, @question.title) %>

<div class="row question-show">
  <div class="col-md-8">
    <div class="question">
      <div class="title">
        <%= @question.title %>
      </div>
      <div class="content">
        <%= @question.description %>
      </div>
      <div class="question-bottom-bar">
        <%= link_to '编辑', edit_question_path(@question), class: 'control-item' %>
        <%= link_to '删除', question_path(@question), method: :delete, data: { confirm: "确认删除？" }, class: 'control-item' %>
        <span class="control-item"><%= @question.viewed_count %>次查看</span>
      </div>
    </div>
    <div class="answers">
      <div class="answers-header">
        <%= @question.answers.count %> 个回答
      </div>
      <%- @question.answers.each do |answer| %>
        <div class="answer">
          <div class="answer-head">
            <div class="user"><%= answer.user %></div>
          </div>
          <div class="content">
            <%= raw answer.content %>
          </div>
          <div class="info">
            <span class="time-info">发布与<%= answer.created_at.strftime("%Y-%m-%d") %></span>
            <a href="#">2条评论</a>
          </div>
        </div>
      <%- end %>
    </div>

    <div class="new-answer-box">

      <%= form_for [@question, @question.answers.new] do |f| %>
        <%= f.text_area :content, class: 'form-control', id: "txtNewAnswer", placeholder: "写回答..." %>

        <%= f.submit "保存", id: "btnNewAnswer", class: 'btn btn-primary' %>
      <%- end %>
    </div>

  </div>
  <dov class="col-md-4">
    <div class="right-control">
      <%- if user_signed_in? %>
        <%- if @question.followed_by?(current_user.id) %>
          <%= link_to "取消关注", unfollow_question_path(@question), class: "btn btn-default", method: :delete %>
        <%- else %>
          <%= link_to "关注", follow_question_path(@question), class: "btn btn-primary", method: :post %>
        <%- end %>
      <%- else %>

        登陆后关注

      <%- end %>
    </div>
  </dov>
</div>




